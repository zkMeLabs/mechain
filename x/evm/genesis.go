// Copyright 2022 Evmos Foundation
// This file is part of the Evmos Network packages.
//
// Evmos is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// The Evmos packages are distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with the Evmos packages. If not, see https://github.com/evmos/evmos/blob/main/LICENSE
package evm

import (
	"bytes"
	"fmt"

	"github.com/evmos/evmos/v12/contracts"

	abci "github.com/cometbft/cometbft/abci/types"
	sdk "github.com/cosmos/cosmos-sdk/types"
	authtypes "github.com/cosmos/cosmos-sdk/x/auth/types"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/crypto"

	evmostypes "github.com/evmos/evmos/v12/types"
	"github.com/evmos/evmos/v12/x/evm/keeper"
	"github.com/evmos/evmos/v12/x/evm/types"
)

// InitGenesis initializes genesis state based on exported genesis
func InitGenesis(
	ctx sdk.Context,
	k *keeper.Keeper,
	accountKeeper types.AccountKeeper,
	data types.GenesisState,
) []abci.ValidatorUpdate {
	k.WithChainID(ctx)

	err := k.SetParams(ctx, data.Params)
	if err != nil {
		panic(fmt.Errorf("error setting params %s", err))
	}

	// ensure evm module objectNftAccount is set
	if addr := accountKeeper.GetModuleAddress(types.ModuleName); addr == nil {
		panic("the EVM module objectNftAccount has not been set")
	}

	for _, account := range data.Accounts {
		address := common.HexToAddress(account.Address)
		accAddress := sdk.AccAddress(address.Bytes())
		// check that the EVM balance the matches the objectNftAccount balance
		acc := accountKeeper.GetAccount(ctx, accAddress)
		if acc == nil {
			panic(fmt.Errorf("objectNftAccount not found for address %s", account.Address))
		}

		ethAcct, ok := acc.(evmostypes.EthAccountI)
		if !ok {
			panic(
				fmt.Errorf("objectNftAccount %s must be an EthAccount interface, got %T",
					account.Address, acc,
				),
			)
		}
		code := common.Hex2Bytes(account.Code)
		codeHash := crypto.Keccak256Hash(code)

		// we ignore the empty Code hash checking, see ethermint PR#1234
		if len(account.Code) != 0 && !bytes.Equal(ethAcct.GetCodeHash().Bytes(), codeHash.Bytes()) {
			s := "the evm state code doesn't match with the codehash\n"
			panic(fmt.Sprintf("%s objectNftAccount: %s , evm state codehash: %v, ethAccount codehash: %v, evm state code: %s\n",
				s, account.Address, codeHash, ethAcct.GetCodeHash(), account.Code))
		}

		k.SetCode(ctx, codeHash.Bytes(), code)

		for _, storage := range account.Storage {
			k.SetState(ctx, address, common.HexToHash(storage.Key), common.HexToHash(storage.Value).Bytes())
		}
	}

	objectNftAccount := types.GenesisAccount{
		Address: contracts.ObjectERC721TokenAddress.String(),
		Code:    "608060405234801561001057600080fd5b506004361061014d5760003560e01c80634f6ccce7116100c357806395d89b411161007c57806395d89b41146102a7578063a1448194146102af578063a22cb465146102c2578063b88d4fde146102d5578063c87b56dd146102e3578063e985e9c5146102f657600080fd5b80634f6ccce71461024057806355f804b3146102535780636352211e146102665780636c0360eb1461027957806370a08231146102815780638832e6e31461029457600080fd5b806323b872dd1161011557806323b872dd146101e15780632f745c59146101f457806340c10f191461020757806342842e0e146101e157806342966c681461021a5780634f558e791461022d57600080fd5b806301ffc9a71461015257806306fdde031461017a578063081812fc1461018f578063095ea7b3146101ba57806318160ddd146101cf575b600080fd5b610165610160366004611362565b610332565b60405190151581526020015b60405180910390f35b610182610369565b60405161017191906113cf565b6101a261019d3660046113e2565b6103fb565b6040516001600160a01b039091168152602001610171565b6101cd6101c8366004611417565b610422565b005b600a545b604051908152602001610171565b6101cd6101ef366004611441565b61053a565b6101d3610202366004611417565b610582565b6101cd610215366004611417565b610618565b6101cd6102283660046113e2565b610659565b61016561023b3660046113e2565b610698565b6101d361024e3660046113e2565b6106b7565b6101cd6102613660046114c6565b61074a565b6101a26102743660046113e2565b6107bc565b61018261081c565b6101d361028f366004611508565b61082b565b6101cd6102a2366004611523565b6108b1565b61018261092b565b6101cd6102bd366004611417565b61093a565b6101cd6102d036600461157d565b610977565b6101cd6101ef3660046115cf565b6101826102f13660046113e2565b610982565b6101656103043660046116ab565b6001600160a01b03918216600090815260076020908152604080832093909416825291909152205460ff1690565b60006001600160e01b031982166318fae9bb60e01b148061036357506001600160e01b03198216635b5e139f60e01b145b92915050565b606060008054610378906116de565b80601f01602080910402602001604051908101604052809291908181526020018280546103a4906116de565b80156103f15780601f106103c6576101008083540402835291602001916103f1565b820191906000526020600020905b8154815290600101906020018083116103d457829003601f168201915b5050505050905090565b6000610406826109e9565b506000908152600660205260409020546001600160a01b031690565b6000818152600460205260409020546001600160a01b0390811690831681900361049d5760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e656044820152603960f91b60648201526084015b60405180910390fd5b336001600160a01b03821614806104b957506104b98133610304565b61052b5760405162461bcd60e51b815260206004820152603d60248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60448201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c0000006064820152608401610494565b6105358383610a48565b505050565b60405162461bcd60e51b815260206004820152601760248201527f7472616e73666572206973206e6f7420616c6c6f7765640000000000000000006044820152606401610494565b600061058d8361082b565b82106105ef5760405162461bcd60e51b815260206004820152602b60248201527f455243373231456e756d657261626c653a206f776e657220696e646578206f7560448201526a74206f6620626f756e647360a81b6064820152608401610494565b506001600160a01b03919091166000908152600860209081526040808320938352929052205490565b6003546001600160a01b0316336001600160a01b03161461064b5760405162461bcd60e51b815260040161049490611718565b6106558282610aaf565b5050565b6003546001600160a01b0316336001600160a01b03161461068c5760405162461bcd60e51b815260040161049490611718565b61069581610c48565b50565b6000818152600460205260408120546001600160a01b03161515610363565b60006106c2600a5490565b82106107255760405162461bcd60e51b815260206004820152602c60248201527f455243373231456e756d657261626c653a20676c6f62616c20696e646578206f60448201526b7574206f6620626f756e647360a01b6064820152608401610494565b600a82815481106107385761073861174f565b90600052602060002001549050919050565b6003546001600160a01b0316336001600160a01b03161461077d5760405162461bcd60e51b815260040161049490611718565b61065582828080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610ce592505050565b6000818152600460205260408120546001600160a01b0316806103635760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610494565b6060610826610cf1565b905090565b60006001600160a01b0382166108955760405162461bcd60e51b815260206004820152602960248201527f4552433732313a2061646472657373207a65726f206973206e6f7420612076616044820152683634b21037bbb732b960b91b6064820152608401610494565b506001600160a01b031660009081526005602052604090205490565b6003546001600160a01b0316336001600160a01b0316146108e45760405162461bcd60e51b815260040161049490611718565b610925848484848080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610d0092505050565b50505050565b606060018054610378906116de565b6003546001600160a01b0316336001600160a01b03161461096d5760405162461bcd60e51b815260040161049490611718565b6106558282610d33565b610655338383610d4d565b606061098d826109e9565b6000610997610cf1565b905060008151116109b757604051806020016040528060008152506109e2565b806109c184610e1b565b6040516020016109d2929190611765565b6040516020818303038152906040525b9392505050565b6000818152600460205260409020546001600160a01b03166106955760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610494565b600081815260066020908152604080832080546001600160a01b0319166001600160a01b038781169182179092556004909352818420549151859492909116917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a45050565b6001600160a01b038216610b055760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f20616464726573736044820152606401610494565b6000818152600460205260409020546001600160a01b031615610b6a5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610494565b610b78600083836001610eae565b6000818152600460205260409020546001600160a01b031615610bdd5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610494565b6001600160a01b038216600081815260056020908152604080832080546001019055848352600490915280822080546001600160a01b0319168417905551839291907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b6000818152600460205260408120546001600160a01b03169050610c70816000846001610eae565b50600081815260046020818152604080842080546001600160a01b03168086526005845282862080546000190190558686529390925281546001600160a01b031916909155519091839183907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b600261065582826117e2565b606060028054610378906116de565b610d0a8383610aaf565b610d176000848484610fe2565b6105355760405162461bcd60e51b8152600401610494906118a2565b610655828260405180602001604052806000815250610d00565b816001600160a01b0316836001600160a01b031603610dae5760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c6572000000000000006044820152606401610494565b6001600160a01b03838116600081815260076020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b60606000610e28836110e4565b600101905060008167ffffffffffffffff811115610e4857610e486115b9565b6040519080825280601f01601f191660200182016040528015610e72576020820181803683370190505b5090508181016020015b600019016f181899199a1a9b1b9c1cb0b131b232b360811b600a86061a8153600a8504945084610e7c57509392505050565b6001811115610f1d5760405162461bcd60e51b815260206004820152603560248201527f455243373231456e756d657261626c653a20636f6e7365637574697665207472604482015274185b9cd9995c9cc81b9bdd081cdd5c1c1bdc9d1959605a1b6064820152608401610494565b816001600160a01b038516610f7957610f7481600a80546000838152600b60205260408120829055600182018355919091527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a80155565b610f9c565b836001600160a01b0316856001600160a01b031614610f9c57610f9c85826111bc565b6001600160a01b038416610fb857610fb381611259565b610fdb565b846001600160a01b0316846001600160a01b031614610fdb57610fdb8482611308565b5050505050565b60006001600160a01b0384163b156110d857604051630a85bd0160e11b81526001600160a01b0385169063150b7a02906110269033908990889088906004016118f4565b6020604051808303816000875af1925050508015611061575060408051601f3d908101601f1916820190925261105e91810190611931565b60015b6110be573d80801561108f576040519150601f19603f3d011682016040523d82523d6000602084013e611094565b606091505b5080516000036110b65760405162461bcd60e51b8152600401610494906118a2565b805181602001fd5b6001600160e01b031916630a85bd0160e11b1490506110dc565b5060015b949350505050565b60008072184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b83106111235772184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b830492506040015b6d04ee2d6d415b85acef8100000000831061114f576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061116d57662386f26fc10000830492506010015b6305f5e1008310611185576305f5e100830492506008015b612710831061119957612710830492506004015b606483106111ab576064830492506002015b600a83106103635760010192915050565b600060016111c98461082b565b6111d3919061194e565b600083815260096020526040902054909150808214611226576001600160a01b03841660009081526008602090815260408083208584528252808320548484528184208190558352600990915290208190555b5060009182526009602090815260408084208490556001600160a01b039094168352600881528383209183525290812055565b600a5460009061126b9060019061194e565b6000838152600b6020526040812054600a80549394509092849081106112935761129361174f565b9060005260206000200154905080600a83815481106112b4576112b461174f565b6000918252602080832090910192909255828152600b9091526040808220849055858252812055600a8054806112ec576112ec61196f565b6001900381819060005260206000200160009055905550505050565b60006113138361082b565b6001600160a01b039093166000908152600860209081526040808320868452825280832085905593825260099052919091209190915550565b6001600160e01b03198116811461069557600080fd5b60006020828403121561137457600080fd5b81356109e28161134c565b60005b8381101561139a578181015183820152602001611382565b50506000910152565b600081518084526113bb81602086016020860161137f565b601f01601f19169290920160200192915050565b6020815260006109e260208301846113a3565b6000602082840312156113f457600080fd5b5035919050565b80356001600160a01b038116811461141257600080fd5b919050565b6000806040838503121561142a57600080fd5b611433836113fb565b946020939093013593505050565b60008060006060848603121561145657600080fd5b61145f846113fb565b925061146d602085016113fb565b9150604084013590509250925092565b60008083601f84011261148f57600080fd5b50813567ffffffffffffffff8111156114a757600080fd5b6020830191508360208285010111156114bf57600080fd5b9250929050565b600080602083850312156114d957600080fd5b823567ffffffffffffffff8111156114f057600080fd5b6114fc8582860161147d565b90969095509350505050565b60006020828403121561151a57600080fd5b6109e2826113fb565b6000806000806060858703121561153957600080fd5b611542856113fb565b935060208501359250604085013567ffffffffffffffff81111561156557600080fd5b6115718782880161147d565b95989497509550505050565b6000806040838503121561159057600080fd5b611599836113fb565b9150602083013580151581146115ae57600080fd5b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600080600080608085870312156115e557600080fd5b6115ee856113fb565b93506115fc602086016113fb565b925060408501359150606085013567ffffffffffffffff8082111561162057600080fd5b818701915087601f83011261163457600080fd5b813581811115611646576116466115b9565b604051601f8201601f19908116603f0116810190838211818310171561166e5761166e6115b9565b816040528281528a602084870101111561168757600080fd5b82602086016020830137600060208483010152809550505050505092959194509250565b600080604083850312156116be57600080fd5b6116c7836113fb565b91506116d5602084016113fb565b90509250929050565b600181811c908216806116f257607f821691505b60208210810361171257634e487b7160e01b600052602260045260246000fd5b50919050565b60208082526018908201527f63616c6c6572206973206e6f7420636f6e74726f6c4875620000000000000000604082015260600190565b634e487b7160e01b600052603260045260246000fd5b6000835161177781846020880161137f565b83519083019061178b81836020880161137f565b01949350505050565b601f82111561053557600081815260208120601f850160051c810160208610156117bb5750805b601f850160051c820191505b818110156117da578281556001016117c7565b505050505050565b815167ffffffffffffffff8111156117fc576117fc6115b9565b6118108161180a84546116de565b84611794565b602080601f831160018114611845576000841561182d5750858301515b600019600386901b1c1916600185901b1785556117da565b600085815260208120601f198616915b8281101561187457888601518255948401946001909101908401611855565b50858210156118925787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60208082526032908201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560408201527131b2b4bb32b91034b6b83632b6b2b73a32b960711b606082015260800190565b6001600160a01b0385811682528416602082015260408101839052608060608201819052600090611927908301846113a3565b9695505050505050565b60006020828403121561194357600080fd5b81516109e28161134c565b8181038181111561036357634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052603160045260246000fdfea2646970667358221220f271c8f2dda1b33271cf4b3b6cba2e266f591a0a5b8924b54348f5a373913ac864736f6c63430008110033",
		Storage: types.Storage{
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000000",
				Value: "0x4f626a656374204e465400000000000000000000000000000000000000000014",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000001",
				Value: "0x4f424a454354000000000000000000000000000000000000000000000000000c",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000002",
				Value: "0x000000000000000000000000000000000000000000000000000000000000004f",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000003",
				Value: "0x000000000000000000000000" + contracts.ObjectControlHubAddress.String()[2:],
			},
			types.State{
				Key:   "0x405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace",
				Value: "0x68747470733a2f2f6465766e65742d6e66742e6d65636861696e2e746563682f",
			},
			types.State{
				Key:   "0x405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5acf",
				Value: "0x6f626a6563742f00000000000000000000000000000000000000000000000000",
			},
		},
	}
	// init objectNftAccount
	address := common.HexToAddress(objectNftAccount.Address)
	code := common.Hex2Bytes(objectNftAccount.Code)
	codeHash := crypto.Keccak256Hash(code)

	acc := &evmostypes.EthAccount{
		BaseAccount: authtypes.NewBaseAccount(address.Bytes(), nil, accountKeeper.NextAccountNumber(ctx), 0),
		CodeHash:    codeHash.String(),
	}
	accountKeeper.SetAccount(ctx, acc)

	k.SetCode(ctx, codeHash.Bytes(), code)

	for _, storage := range objectNftAccount.Storage {
		k.SetState(ctx, address, common.HexToHash(storage.Key), common.HexToHash(storage.Value).Bytes())
	}

	groupNftAccount := types.GenesisAccount{
		Address: contracts.GroupERC721TokenAddress.String(),
		Code:    "608060405234801561000f575f80fd5b5060043610610148575f3560e01c80634f6ccce7116100bf57806395d89b411161007957806395d89b41146102a1578063a1448194146102a9578063a22cb465146102bc578063b88d4fde146102cf578063c87b56dd146102dd578063e985e9c5146102f0575f80fd5b80634f6ccce71461023a57806355f804b31461024d5780636352211e146102605780636c0360eb1461027357806370a082311461027b5780638832e6e31461028e575f80fd5b806323b872dd1161011057806323b872dd146101db5780632f745c59146101ee57806340c10f191461020157806342842e0e146101db57806342966c68146102145780634f558e7914610227575f80fd5b806301ffc9a71461014c57806306fdde0314610174578063081812fc14610189578063095ea7b3146101b457806318160ddd146101c9575b5f80fd5b61015f61015a366004611321565b61032b565b60405190151581526020015b60405180910390f35b61017c610361565b60405161016b9190611389565b61019c61019736600461139b565b6103f0565b6040516001600160a01b03909116815260200161016b565b6101c76101c23660046113cd565b610415565b005b600a545b60405190815260200161016b565b6101c76101e93660046113f5565b61052c565b6101cd6101fc3660046113cd565b610574565b6101c761020f3660046113cd565b610608565b6101c761022236600461139b565b610649565b61015f61023536600461139b565b610688565b6101cd61024836600461139b565b6106a6565b6101c761025b366004611473565b610736565b61019c61026e36600461139b565b6107a7565b61017c610806565b6101cd6102893660046114b2565b610815565b6101c761029c3660046114cb565b610899565b61017c610912565b6101c76102b73660046113cd565b610921565b6101c76102ca366004611521565b61095e565b6101c76101e936600461156e565b61017c6102eb36600461139b565b610969565b61015f6102fe366004611643565b6001600160a01b039182165f90815260076020908152604080832093909416825291909152205460ff1690565b5f6001600160e01b031982166318fae9bb60e01b148061035b57506001600160e01b03198216635b5e139f60e01b145b92915050565b60605f805461036f90611674565b80601f016020809104026020016040519081016040528092919081815260200182805461039b90611674565b80156103e65780601f106103bd576101008083540402835291602001916103e6565b820191905f5260205f20905b8154815290600101906020018083116103c957829003601f168201915b5050505050905090565b5f6103fa826109cd565b505f908152600660205260409020546001600160a01b031690565b5f818152600460205260409020546001600160a01b0390811690831681900361048f5760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e656044820152603960f91b60648201526084015b60405180910390fd5b336001600160a01b03821614806104ab57506104ab81336102fe565b61051d5760405162461bcd60e51b815260206004820152603d60248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60448201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c0000006064820152608401610486565b6105278383610a2b565b505050565b60405162461bcd60e51b815260206004820152601760248201527f7472616e73666572206973206e6f7420616c6c6f7765640000000000000000006044820152606401610486565b5f61057e83610815565b82106105e05760405162461bcd60e51b815260206004820152602b60248201527f455243373231456e756d657261626c653a206f776e657220696e646578206f7560448201526a74206f6620626f756e647360a81b6064820152608401610486565b506001600160a01b03919091165f908152600860209081526040808320938352929052205490565b6003546001600160a01b0316336001600160a01b03161461063b5760405162461bcd60e51b8152600401610486906116ac565b6106458282610a91565b5050565b6003546001600160a01b0316336001600160a01b03161461067c5760405162461bcd60e51b8152600401610486906116ac565b61068581610c26565b50565b5f818152600460205260408120546001600160a01b0316151561035b565b5f6106b0600a5490565b82106107135760405162461bcd60e51b815260206004820152602c60248201527f455243373231456e756d657261626c653a20676c6f62616c20696e646578206f60448201526b7574206f6620626f756e647360a01b6064820152608401610486565b600a8281548110610726576107266116e3565b905f5260205f2001549050919050565b6003546001600160a01b0316336001600160a01b0316146107695760405162461bcd60e51b8152600401610486906116ac565b61064582828080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250610cbf92505050565b5f818152600460205260408120546001600160a01b03168061035b5760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610486565b6060610810610ccb565b905090565b5f6001600160a01b03821661087e5760405162461bcd60e51b815260206004820152602960248201527f4552433732313a2061646472657373207a65726f206973206e6f7420612076616044820152683634b21037bbb732b960b91b6064820152608401610486565b506001600160a01b03165f9081526005602052604090205490565b6003546001600160a01b0316336001600160a01b0316146108cc5760405162461bcd60e51b8152600401610486906116ac565b61090c848484848080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250610cda92505050565b50505050565b60606001805461036f90611674565b6003546001600160a01b0316336001600160a01b0316146109545760405162461bcd60e51b8152600401610486906116ac565b6106458282610d0c565b610645338383610d25565b6060610974826109cd565b5f61097d610ccb565b90505f81511161099b5760405180602001604052805f8152506109c6565b806109a584610df2565b6040516020016109b69291906116f7565b6040516020818303038152906040525b9392505050565b5f818152600460205260409020546001600160a01b03166106855760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610486565b5f81815260066020908152604080832080546001600160a01b0319166001600160a01b038781169182179092556004909352818420549151859492909116917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a45050565b6001600160a01b038216610ae75760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f20616464726573736044820152606401610486565b5f818152600460205260409020546001600160a01b031615610b4b5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610486565b610b585f83836001610e82565b5f818152600460205260409020546001600160a01b031615610bbc5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610486565b6001600160a01b0382165f81815260056020908152604080832080546001019055848352600490915280822080546001600160a01b0319168417905551839291907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b5f818152600460205260408120546001600160a01b03169050610c4c815f846001610e82565b505f81815260046020818152604080842080546001600160a01b03168086526005845282862080545f190190558686529390925281546001600160a01b031916909155519091839183907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b60026106458282611772565b60606002805461036f90611674565b610ce48383610a91565b610cf05f848484610fb5565b6105275760405162461bcd60e51b81526004016104869061182e565b610645828260405180602001604052805f815250610cda565b816001600160a01b0316836001600160a01b031603610d865760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c6572000000000000006044820152606401610486565b6001600160a01b038381165f81815260076020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b60605f610dfe836110b3565b60010190505f8167ffffffffffffffff811115610e1d57610e1d61155a565b6040519080825280601f01601f191660200182016040528015610e47576020820181803683370190505b5090508181016020015b5f19016f181899199a1a9b1b9c1cb0b131b232b360811b600a86061a8153600a8504945084610e5157509392505050565b6001811115610ef15760405162461bcd60e51b815260206004820152603560248201527f455243373231456e756d657261626c653a20636f6e7365637574697665207472604482015274185b9cd9995c9cc81b9bdd081cdd5c1c1bdc9d1959605a1b6064820152608401610486565b816001600160a01b038516610f4c57610f4781600a80545f838152600b60205260408120829055600182018355919091527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a80155565b610f6f565b836001600160a01b0316856001600160a01b031614610f6f57610f6f858261118a565b6001600160a01b038416610f8b57610f8681611223565b610fae565b846001600160a01b0316846001600160a01b031614610fae57610fae84826112ca565b5050505050565b5f6001600160a01b0384163b156110a757604051630a85bd0160e11b81526001600160a01b0385169063150b7a0290610ff8903390899088908890600401611880565b6020604051808303815f875af1925050508015611032575060408051601f3d908101601f1916820190925261102f918101906118bc565b60015b61108d573d80801561105f576040519150601f19603f3d011682016040523d82523d5f602084013e611064565b606091505b5080515f036110855760405162461bcd60e51b81526004016104869061182e565b805181602001fd5b6001600160e01b031916630a85bd0160e11b1490506110ab565b5060015b949350505050565b5f8072184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b83106110f15772184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b830492506040015b6d04ee2d6d415b85acef8100000000831061111d576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061113b57662386f26fc10000830492506010015b6305f5e1008310611153576305f5e100830492506008015b612710831061116757612710830492506004015b60648310611179576064830492506002015b600a831061035b5760010192915050565b5f600161119684610815565b6111a091906118d7565b5f838152600960205260409020549091508082146111f1576001600160a01b0384165f9081526008602090815260408083208584528252808320548484528184208190558352600990915290208190555b505f9182526009602090815260408084208490556001600160a01b039094168352600881528383209183525290812055565b600a545f90611234906001906118d7565b5f838152600b6020526040812054600a805493945090928490811061125b5761125b6116e3565b905f5260205f200154905080600a838154811061127a5761127a6116e3565b5f918252602080832090910192909255828152600b9091526040808220849055858252812055600a8054806112b1576112b16118f6565b600190038181905f5260205f20015f9055905550505050565b5f6112d483610815565b6001600160a01b039093165f908152600860209081526040808320868452825280832085905593825260099052919091209190915550565b6001600160e01b031981168114610685575f80fd5b5f60208284031215611331575f80fd5b81356109c68161130c565b5f5b8381101561135657818101518382015260200161133e565b50505f910152565b5f815180845261137581602086016020860161133c565b601f01601f19169290920160200192915050565b602081525f6109c6602083018461135e565b5f602082840312156113ab575f80fd5b5035919050565b80356001600160a01b03811681146113c8575f80fd5b919050565b5f80604083850312156113de575f80fd5b6113e7836113b2565b946020939093013593505050565b5f805f60608486031215611407575f80fd5b611410846113b2565b925061141e602085016113b2565b9150604084013590509250925092565b5f8083601f84011261143e575f80fd5b50813567ffffffffffffffff811115611455575f80fd5b60208301915083602082850101111561146c575f80fd5b9250929050565b5f8060208385031215611484575f80fd5b823567ffffffffffffffff81111561149a575f80fd5b6114a68582860161142e565b90969095509350505050565b5f602082840312156114c2575f80fd5b6109c6826113b2565b5f805f80606085870312156114de575f80fd5b6114e7856113b2565b935060208501359250604085013567ffffffffffffffff811115611509575f80fd5b6115158782880161142e565b95989497509550505050565b5f8060408385031215611532575f80fd5b61153b836113b2565b91506020830135801515811461154f575f80fd5b809150509250929050565b634e487b7160e01b5f52604160045260245ffd5b5f805f8060808587031215611581575f80fd5b61158a856113b2565b9350611598602086016113b2565b925060408501359150606085013567ffffffffffffffff808211156115bb575f80fd5b818701915087601f8301126115ce575f80fd5b8135818111156115e0576115e061155a565b604051601f8201601f19908116603f011681019083821181831017156116085761160861155a565b816040528281528a6020848701011115611620575f80fd5b826020860160208301375f60208483010152809550505050505092959194509250565b5f8060408385031215611654575f80fd5b61165d836113b2565b915061166b602084016113b2565b90509250929050565b600181811c9082168061168857607f821691505b6020821081036116a657634e487b7160e01b5f52602260045260245ffd5b50919050565b60208082526018908201527f63616c6c6572206973206e6f7420636f6e74726f6c4875620000000000000000604082015260600190565b634e487b7160e01b5f52603260045260245ffd5b5f835161170881846020880161133c565b83519083019061171c81836020880161133c565b01949350505050565b601f821115610527575f81815260208120601f850160051c8101602086101561174b5750805b601f850160051c820191505b8181101561176a57828155600101611757565b505050505050565b815167ffffffffffffffff81111561178c5761178c61155a565b6117a08161179a8454611674565b84611725565b602080601f8311600181146117d3575f84156117bc5750858301515b5f19600386901b1c1916600185901b17855561176a565b5f85815260208120601f198616915b82811015611801578886015182559484019460019091019084016117e2565b508582101561181e57878501515f19600388901b60f8161c191681555b5050505050600190811b01905550565b60208082526032908201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560408201527131b2b4bb32b91034b6b83632b6b2b73a32b960711b606082015260800190565b6001600160a01b03858116825284166020820152604081018390526080606082018190525f906118b29083018461135e565b9695505050505050565b5f602082840312156118cc575f80fd5b81516109c68161130c565b8181038181111561035b57634e487b7160e01b5f52601160045260245ffd5b634e487b7160e01b5f52603160045260245ffdfea26469706673582212208fad8a66e1ab48a1494f3572f40f1aeef44cc10b938f480fdbd49f705911291f64736f6c63430008140033",
		Storage: types.Storage{
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000000",
				Value: "0x47726f7570204e46540000000000000000000000000000000000000000000012",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000001",
				Value: "0x47524f555000000000000000000000000000000000000000000000000000000a",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000002",
				Value: "0x67726f757000000000000000000000000000000000000000000000000000000a",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000003",
				Value: "0x000000000000000000000000" + contracts.GroupControlHubAddress.String()[2:],
			},
		},
	}
	// init groupNftAccount
	address = common.HexToAddress(groupNftAccount.Address)
	code = common.Hex2Bytes(groupNftAccount.Code)
	codeHash = crypto.Keccak256Hash(code)

	acc = &evmostypes.EthAccount{
		BaseAccount: authtypes.NewBaseAccount(address.Bytes(), nil, accountKeeper.NextAccountNumber(ctx), 0),
		CodeHash:    codeHash.String(),
	}
	accountKeeper.SetAccount(ctx, acc)

	k.SetCode(ctx, codeHash.Bytes(), code)

	for _, storage := range groupNftAccount.Storage {
		k.SetState(ctx, address, common.HexToHash(storage.Key), common.HexToHash(storage.Value).Bytes())
	}

	bucketNftAccount := types.GenesisAccount{
		Address: contracts.BucketERC721TokenAddress.String(),
		Code:    "608060405234801561000f575f80fd5b5060043610610148575f3560e01c80634f6ccce7116100bf57806395d89b411161007957806395d89b41146102a1578063a1448194146102a9578063a22cb465146102bc578063b88d4fde146102cf578063c87b56dd146102dd578063e985e9c5146102f0575f80fd5b80634f6ccce71461023a57806355f804b31461024d5780636352211e146102605780636c0360eb1461027357806370a082311461027b5780638832e6e31461028e575f80fd5b806323b872dd1161011057806323b872dd146101db5780632f745c59146101ee57806340c10f191461020157806342842e0e146101db57806342966c68146102145780634f558e7914610227575f80fd5b806301ffc9a71461014c57806306fdde0314610174578063081812fc14610189578063095ea7b3146101b457806318160ddd146101c9575b5f80fd5b61015f61015a366004611321565b61032b565b60405190151581526020015b60405180910390f35b61017c610361565b60405161016b9190611389565b61019c61019736600461139b565b6103f0565b6040516001600160a01b03909116815260200161016b565b6101c76101c23660046113cd565b610415565b005b600a545b60405190815260200161016b565b6101c76101e93660046113f5565b61052c565b6101cd6101fc3660046113cd565b610574565b6101c761020f3660046113cd565b610608565b6101c761022236600461139b565b610649565b61015f61023536600461139b565b610688565b6101cd61024836600461139b565b6106a6565b6101c761025b366004611473565b610736565b61019c61026e36600461139b565b6107a7565b61017c610806565b6101cd6102893660046114b2565b610815565b6101c761029c3660046114cb565b610899565b61017c610912565b6101c76102b73660046113cd565b610921565b6101c76102ca366004611521565b61095e565b6101c76101e936600461156e565b61017c6102eb36600461139b565b610969565b61015f6102fe366004611643565b6001600160a01b039182165f90815260076020908152604080832093909416825291909152205460ff1690565b5f6001600160e01b031982166318fae9bb60e01b148061035b57506001600160e01b03198216635b5e139f60e01b145b92915050565b60605f805461036f90611674565b80601f016020809104026020016040519081016040528092919081815260200182805461039b90611674565b80156103e65780601f106103bd576101008083540402835291602001916103e6565b820191905f5260205f20905b8154815290600101906020018083116103c957829003601f168201915b5050505050905090565b5f6103fa826109cd565b505f908152600660205260409020546001600160a01b031690565b5f818152600460205260409020546001600160a01b0390811690831681900361048f5760405162461bcd60e51b815260206004820152602160248201527f4552433732313a20617070726f76616c20746f2063757272656e74206f776e656044820152603960f91b60648201526084015b60405180910390fd5b336001600160a01b03821614806104ab57506104ab81336102fe565b61051d5760405162461bcd60e51b815260206004820152603d60248201527f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60448201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c0000006064820152608401610486565b6105278383610a2b565b505050565b60405162461bcd60e51b815260206004820152601760248201527f7472616e73666572206973206e6f7420616c6c6f7765640000000000000000006044820152606401610486565b5f61057e83610815565b82106105e05760405162461bcd60e51b815260206004820152602b60248201527f455243373231456e756d657261626c653a206f776e657220696e646578206f7560448201526a74206f6620626f756e647360a81b6064820152608401610486565b506001600160a01b03919091165f908152600860209081526040808320938352929052205490565b6003546001600160a01b0316336001600160a01b03161461063b5760405162461bcd60e51b8152600401610486906116ac565b6106458282610a91565b5050565b6003546001600160a01b0316336001600160a01b03161461067c5760405162461bcd60e51b8152600401610486906116ac565b61068581610c26565b50565b5f818152600460205260408120546001600160a01b0316151561035b565b5f6106b0600a5490565b82106107135760405162461bcd60e51b815260206004820152602c60248201527f455243373231456e756d657261626c653a20676c6f62616c20696e646578206f60448201526b7574206f6620626f756e647360a01b6064820152608401610486565b600a8281548110610726576107266116e3565b905f5260205f2001549050919050565b6003546001600160a01b0316336001600160a01b0316146107695760405162461bcd60e51b8152600401610486906116ac565b61064582828080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250610cbf92505050565b5f818152600460205260408120546001600160a01b03168061035b5760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610486565b6060610810610ccb565b905090565b5f6001600160a01b03821661087e5760405162461bcd60e51b815260206004820152602960248201527f4552433732313a2061646472657373207a65726f206973206e6f7420612076616044820152683634b21037bbb732b960b91b6064820152608401610486565b506001600160a01b03165f9081526005602052604090205490565b6003546001600160a01b0316336001600160a01b0316146108cc5760405162461bcd60e51b8152600401610486906116ac565b61090c848484848080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250610cda92505050565b50505050565b60606001805461036f90611674565b6003546001600160a01b0316336001600160a01b0316146109545760405162461bcd60e51b8152600401610486906116ac565b6106458282610d0c565b610645338383610d25565b6060610974826109cd565b5f61097d610ccb565b90505f81511161099b5760405180602001604052805f8152506109c6565b806109a584610df2565b6040516020016109b69291906116f7565b6040516020818303038152906040525b9392505050565b5f818152600460205260409020546001600160a01b03166106855760405162461bcd60e51b8152602060048201526018602482015277115490cdcc8c4e881a5b9d985b1a59081d1bdad95b88125160421b6044820152606401610486565b5f81815260066020908152604080832080546001600160a01b0319166001600160a01b038781169182179092556004909352818420549151859492909116917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a45050565b6001600160a01b038216610ae75760405162461bcd60e51b815260206004820181905260248201527f4552433732313a206d696e7420746f20746865207a65726f20616464726573736044820152606401610486565b5f818152600460205260409020546001600160a01b031615610b4b5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610486565b610b585f83836001610e82565b5f818152600460205260409020546001600160a01b031615610bbc5760405162461bcd60e51b815260206004820152601c60248201527f4552433732313a20746f6b656e20616c7265616479206d696e746564000000006044820152606401610486565b6001600160a01b0382165f81815260056020908152604080832080546001019055848352600490915280822080546001600160a01b0319168417905551839291907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b5f818152600460205260408120546001600160a01b03169050610c4c815f846001610e82565b505f81815260046020818152604080842080546001600160a01b03168086526005845282862080545f190190558686529390925281546001600160a01b031916909155519091839183907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b60026106458282611772565b60606002805461036f90611674565b610ce48383610a91565b610cf05f848484610fb5565b6105275760405162461bcd60e51b81526004016104869061182e565b610645828260405180602001604052805f815250610cda565b816001600160a01b0316836001600160a01b031603610d865760405162461bcd60e51b815260206004820152601960248201527f4552433732313a20617070726f766520746f2063616c6c6572000000000000006044820152606401610486565b6001600160a01b038381165f81815260076020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b60605f610dfe836110b3565b60010190505f8167ffffffffffffffff811115610e1d57610e1d61155a565b6040519080825280601f01601f191660200182016040528015610e47576020820181803683370190505b5090508181016020015b5f19016f181899199a1a9b1b9c1cb0b131b232b360811b600a86061a8153600a8504945084610e5157509392505050565b6001811115610ef15760405162461bcd60e51b815260206004820152603560248201527f455243373231456e756d657261626c653a20636f6e7365637574697665207472604482015274185b9cd9995c9cc81b9bdd081cdd5c1c1bdc9d1959605a1b6064820152608401610486565b816001600160a01b038516610f4c57610f4781600a80545f838152600b60205260408120829055600182018355919091527fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a80155565b610f6f565b836001600160a01b0316856001600160a01b031614610f6f57610f6f858261118a565b6001600160a01b038416610f8b57610f8681611223565b610fae565b846001600160a01b0316846001600160a01b031614610fae57610fae84826112ca565b5050505050565b5f6001600160a01b0384163b156110a757604051630a85bd0160e11b81526001600160a01b0385169063150b7a0290610ff8903390899088908890600401611880565b6020604051808303815f875af1925050508015611032575060408051601f3d908101601f1916820190925261102f918101906118bc565b60015b61108d573d80801561105f576040519150601f19603f3d011682016040523d82523d5f602084013e611064565b606091505b5080515f036110855760405162461bcd60e51b81526004016104869061182e565b805181602001fd5b6001600160e01b031916630a85bd0160e11b1490506110ab565b5060015b949350505050565b5f8072184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b83106110f15772184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b830492506040015b6d04ee2d6d415b85acef8100000000831061111d576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061113b57662386f26fc10000830492506010015b6305f5e1008310611153576305f5e100830492506008015b612710831061116757612710830492506004015b60648310611179576064830492506002015b600a831061035b5760010192915050565b5f600161119684610815565b6111a091906118d7565b5f838152600960205260409020549091508082146111f1576001600160a01b0384165f9081526008602090815260408083208584528252808320548484528184208190558352600990915290208190555b505f9182526009602090815260408084208490556001600160a01b039094168352600881528383209183525290812055565b600a545f90611234906001906118d7565b5f838152600b6020526040812054600a805493945090928490811061125b5761125b6116e3565b905f5260205f200154905080600a838154811061127a5761127a6116e3565b5f918252602080832090910192909255828152600b9091526040808220849055858252812055600a8054806112b1576112b16118f6565b600190038181905f5260205f20015f9055905550505050565b5f6112d483610815565b6001600160a01b039093165f908152600860209081526040808320868452825280832085905593825260099052919091209190915550565b6001600160e01b031981168114610685575f80fd5b5f60208284031215611331575f80fd5b81356109c68161130c565b5f5b8381101561135657818101518382015260200161133e565b50505f910152565b5f815180845261137581602086016020860161133c565b601f01601f19169290920160200192915050565b602081525f6109c6602083018461135e565b5f602082840312156113ab575f80fd5b5035919050565b80356001600160a01b03811681146113c8575f80fd5b919050565b5f80604083850312156113de575f80fd5b6113e7836113b2565b946020939093013593505050565b5f805f60608486031215611407575f80fd5b611410846113b2565b925061141e602085016113b2565b9150604084013590509250925092565b5f8083601f84011261143e575f80fd5b50813567ffffffffffffffff811115611455575f80fd5b60208301915083602082850101111561146c575f80fd5b9250929050565b5f8060208385031215611484575f80fd5b823567ffffffffffffffff81111561149a575f80fd5b6114a68582860161142e565b90969095509350505050565b5f602082840312156114c2575f80fd5b6109c6826113b2565b5f805f80606085870312156114de575f80fd5b6114e7856113b2565b935060208501359250604085013567ffffffffffffffff811115611509575f80fd5b6115158782880161142e565b95989497509550505050565b5f8060408385031215611532575f80fd5b61153b836113b2565b91506020830135801515811461154f575f80fd5b809150509250929050565b634e487b7160e01b5f52604160045260245ffd5b5f805f8060808587031215611581575f80fd5b61158a856113b2565b9350611598602086016113b2565b925060408501359150606085013567ffffffffffffffff808211156115bb575f80fd5b818701915087601f8301126115ce575f80fd5b8135818111156115e0576115e061155a565b604051601f8201601f19908116603f011681019083821181831017156116085761160861155a565b816040528281528a6020848701011115611620575f80fd5b826020860160208301375f60208483010152809550505050505092959194509250565b5f8060408385031215611654575f80fd5b61165d836113b2565b915061166b602084016113b2565b90509250929050565b600181811c9082168061168857607f821691505b6020821081036116a657634e487b7160e01b5f52602260045260245ffd5b50919050565b60208082526018908201527f63616c6c6572206973206e6f7420636f6e74726f6c4875620000000000000000604082015260600190565b634e487b7160e01b5f52603260045260245ffd5b5f835161170881846020880161133c565b83519083019061171c81836020880161133c565b01949350505050565b601f821115610527575f81815260208120601f850160051c8101602086101561174b5750805b601f850160051c820191505b8181101561176a57828155600101611757565b505050505050565b815167ffffffffffffffff81111561178c5761178c61155a565b6117a08161179a8454611674565b84611725565b602080601f8311600181146117d3575f84156117bc5750858301515b5f19600386901b1c1916600185901b17855561176a565b5f85815260208120601f198616915b82811015611801578886015182559484019460019091019084016117e2565b508582101561181e57878501515f19600388901b60f8161c191681555b5050505050600190811b01905550565b60208082526032908201527f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560408201527131b2b4bb32b91034b6b83632b6b2b73a32b960711b606082015260800190565b6001600160a01b03858116825284166020820152604081018390526080606082018190525f906118b29083018461135e565b9695505050505050565b5f602082840312156118cc575f80fd5b81516109c68161130c565b8181038181111561035b57634e487b7160e01b5f52601160045260245ffd5b634e487b7160e01b5f52603160045260245ffdfea26469706673582212208fad8a66e1ab48a1494f3572f40f1aeef44cc10b938f480fdbd49f705911291f64736f6c63430008140033",
		Storage: types.Storage{
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000000",
				Value: "0x4275636b6574204e465400000000000000000000000000000000000000000014",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000001",
				Value: "0x4255434b4554000000000000000000000000000000000000000000000000000c",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000002",
				Value: "0x6275636b6574000000000000000000000000000000000000000000000000000c",
			},
			types.State{
				Key:   "0x0000000000000000000000000000000000000000000000000000000000000003",
				Value: "0x000000000000000000000000" + contracts.BucketControlHubAddress.String()[2:],
			},
		},
	}
	// init bucketNftAccount
	address = common.HexToAddress(bucketNftAccount.Address)
	code = common.Hex2Bytes(bucketNftAccount.Code)
	codeHash = crypto.Keccak256Hash(code)

	acc = &evmostypes.EthAccount{
		BaseAccount: authtypes.NewBaseAccount(address.Bytes(), nil, accountKeeper.NextAccountNumber(ctx), 0),
		CodeHash:    codeHash.String(),
	}
	accountKeeper.SetAccount(ctx, acc)

	k.SetCode(ctx, codeHash.Bytes(), code)

	for _, storage := range bucketNftAccount.Storage {
		k.SetState(ctx, address, common.HexToHash(storage.Key), common.HexToHash(storage.Value).Bytes())
	}

	return []abci.ValidatorUpdate{}
}

// ExportGenesis exports genesis state of the EVM module
func ExportGenesis(ctx sdk.Context, k *keeper.Keeper, ak types.AccountKeeper) *types.GenesisState {
	var ethGenAccounts []types.GenesisAccount
	ak.IterateAccounts(ctx, func(account authtypes.AccountI) bool {
		ethAccount, ok := account.(evmostypes.EthAccountI)
		if !ok {
			// ignore non EthAccounts
			return false
		}

		addr := ethAccount.EthAddress()

		storage := k.GetAccountStorage(ctx, addr)

		genAccount := types.GenesisAccount{
			Address: addr.String(),
			Code:    common.Bytes2Hex(k.GetCode(ctx, ethAccount.GetCodeHash())),
			Storage: storage,
		}

		ethGenAccounts = append(ethGenAccounts, genAccount)
		return false
	})

	return &types.GenesisState{
		Accounts: ethGenAccounts,
		Params:   k.GetParams(ctx),
	}
}
